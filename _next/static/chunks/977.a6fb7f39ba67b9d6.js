(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{2659:function(e,n,r){"use strict";r.r(n),r.d(n,{Armor:function(){return L}});var t=r(7568),a=r(1799),i=r(9396),c=r(9534),o=r(828),u=r(4051),s=r.n(u),l=r(5893),f="/_next/static/media/volkihar-cube-nx.6150c9af.jpg",d="/_next/static/media/volkihar-cube-ny.f2c25620.jpg",v="/_next/static/media/volkihar-cube-nz.094dd0b3.jpg",m="/_next/static/media/volkihar-cube-px.cb007f0e.jpg",p="/_next/static/media/volkihar-cube-py.46d12f37.jpg",h="/_next/static/media/volkihar-cube-pz.e7c6feeb.jpg",w=r.p+"static/media/volkihar-knight.d62f417b.glb",x=r(7206),y=r(3994),b=r(7260),g=r(6240),_=r(7378),k=r(4529),j=r(7294),E=r(9477);const P=Math.PI/180;Math.PI;var C=r(2362),S=r(3142),z=r(333),R=r.n(z),Z={stiffness:40,damping:20,mass:1.5},L=function(e){var n=e.showDelay,r=void 0===n?0:n,u=e.cameraPosition,z=void 0===u?{x:0,y:0,z:6}:u,L=e.className,A=e.alt,M=(0,c.Z)(e,["showDelay","cameraPosition","className","alt"]),N=(0,j.useState)(!1),D=N[0],O=N[1],T=(0,j.useState)(!1),F=T[0],H=T[1],I=(0,j.useState)(!1),J=I[0],W=I[1],q=(0,j.useRef)(),B=(0,j.useRef)(),Y=(0,j.useRef)(),G=(0,j.useRef)(),K=(0,j.useRef)(),U=(0,j.useRef)(),X=(0,j.useRef)(),Q=(0,k.NM)(q,!1,{threshold:.4}),V=(0,g.J)(),$=(0,_.q)(0,Z),ee=(0,_.q)(0,Z);(0,j.useEffect)((function(){var e=q.current,n=e.clientWidth,r=e.clientHeight;U.current=new E.CP7({canvas:B.current,alpha:!0,antialias:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!0}),U.current.setPixelRatio(2),U.current.setSize(n,r),U.current.outputEncoding=E.knz,U.current.physicallyCorrectLights=!0,U.current.toneMapping=E.LY2,Y.current=new E.cPb(36,n/r,.1,100),Y.current.position.set(z.x,z.y,z.z),K.current=new E.xsS;var a=new E.cBK;G.current=new E.ZAu,K.current.add(G.current);var i=new E.anP(U.current);i.compileCubemapShader();var c=new E.Ox3(16777215,3.2),u=new E.Ox3(16777215,1),l=new E.Ox3(16777215,1);c.position.set(1,.1,2),u.position.set(-1,.1,8),l.position.set(-2,2,-3),X.current=[l,c,u],X.current.forEach((function(e){return K.current.add(e)}));var x=function(){var e=(0,t.Z)(s().mark((function e(){var n,r,c,u,l,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.Zf.loadAsync(w),r=a.loadAsync([f,d,v,m,p,h]),e.t0=o.Z,e.next=5,Promise.all([n,r]);case 5:return e.t1=e.sent,c=(0,e.t0)(e.t1,2),u=c[0],l=c[1],G.current.add(u.scene),u.scene.rotation.y=180*P,u.scene.position.y=-1.6,x=i.fromCubemap(l).texture,K.current.environment=x,i.dispose(),e.next=17,U.current.initTexture(K.current.environment);case 17:G.current.traverse(function(){var e=(0,t.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.material){e.next=3;break}return e.next=3,U.current.initTexture(n.material);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),O(!0),ne();case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,j.startTransition)((function(){x(),setTimeout((function(){W(!0)}),1e3)}));var y=$.onChange((function(e){G.current.rotation.x=e,ne()})),b=ee.onChange((function(e){G.current.rotation.y=e,ne()}));return function(){(0,S.Ji)(X.current),(0,S.in)(K.current),(0,S.e8)(U.current),y(),b()}}),[]);var ne=(0,j.useCallback)((function(){U.current.render(K.current,Y.current)}),[]);return(0,j.useEffect)((function(){var e=function(e){var n=window.innerWidth,r=window.innerHeight,t=(e.clientX-n/2)/n,a=(e.clientY-r/2)/r;$.set(a/2),ee.set(t/2)};return Q&&H(!0),Q&&!V&&window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}}),[Q,V,$,ee]),(0,j.useEffect)((function(){var e=function(){if(q.current){var e=q.current,n=e.clientWidth,r=e.clientHeight;U.current.setSize(n,r),Y.current.aspect=n/r,Y.current.updateProjectionMatrix(),ne()}};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[ne]),(0,l.jsxs)("div",(0,i.Z)((0,a.Z)({className:(0,C.Sh)(R().armor,L),ref:q,role:"img","aria-label":A},M),{children:[(0,l.jsx)(b.u,{unmount:!0,in:!D&&J,timeout:(0,C.zG)(y.T.base.durationL),children:function(e){return(0,l.jsx)(x.a,{className:R().loader,"data-visible":e})}}),(0,l.jsx)("canvas",{className:R().canvas,ref:B,"data-loaded":D&&F,style:(0,C.Fh)({delay:(0,C.aU)(r)})})]}))}},3142:function(e,n,r){"use strict";r.d(n,{Et:function(){return s},Ji:function(){return v},Zf:function(){return u},e8:function(){return d},in:function(){return l},x2:function(){return m}});var t=r(9477),a=r(4976),i=r(7607);t.CtF.enabled=!0;var c=new a._,o=new i.E;c.setDecoderPath("/draco/"),o.setDRACOLoader(c);var u=o,s=new t.dpR,l=function(e){null===e||void 0===e||e.traverse((function(e){if(e.isMesh)if(e.geometry.dispose(),e.material.isMaterial)f(e.material);else{var n=!0,r=!1,t=void 0;try{for(var a,i=e.material[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;f(c)}}catch(o){r=!0,t=o}finally{try{n||null==i.return||i.return()}finally{if(r)throw t}}}}))},f=function(e){e.dispose();var n=!0,r=!1,t=void 0;try{for(var a,i=Object.keys(e)[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c,o,u,s=e[a.value];if(s&&"object"===typeof s&&"minFilter"in s)s.dispose(),null===(c=s.source)||void 0===c||null===(o=c.data)||void 0===o||null===(u=o.close)||void 0===u||u.call(o)}}catch(l){r=!0,t=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw t}}},d=function(e){e.dispose(),e=null},v=function(e){var n=!0,r=!1,t=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;c.parent.remove(c)}}catch(o){r=!0,t=o}finally{try{n||null==i.return||i.return()}finally{if(r)throw t}}},m=function(e,n){var r;return n.traverse((function(n){n.name===e&&(r=n)})),r}},333:function(e){e.exports={armor:"Armor_armor__7iFmc",loader:"Armor_loader__B2DLm",canvas:"Armor_canvas__Z6s00"}}}]);